<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="format-detection" content="telephone=no" />
        <meta name="msapplication-tap-highlight" content="no" />
        <!-- WARNING: for iOS 7, remove the width=device-width and height=device-height attributes. See https://issues.apache.org/jira/browse/CB-4323 -->
        <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height" />
        <link rel="stylesheet" type="text/css" href="css/jquery.mobile-1.4.5.css" />

        <title>Butterfly in my Phone</title>

        <script type="text/javascript" src="js/lib/jquery-1.12.4.min.js"></script>
        <script type="text/javascript" src="js/lib/jscolor.min.js"></script>
        <script type="text/javascript" src="js/lib/jquery.mobile-1.4.5.min.js"></script>

        <script type="text/javascript" src="cordova.js"></script>

        <script src="http://debug3.build.phonegap.com/target/target-script-min.js#1ed3da8c-1e82-11e6-909d-067c7ecc21b3"></script>

        <script type="text/javascript">
            app.initialize();
                                  
            function onload(){
              document.addEventListener("deviceready", deviceReady, false);
            }

            function deviceReady(){
              serial.requestPermission( function(){
                                          serial.open({baudRate: 9600}, function(){ alert("Serial port open :)"); }, function(){ alert("Failed to open Serial port"); } );
                                        }, 
                                        function(){
                                          alert("Failed to request Serial permission");
                                        }
              );
            }
            
            function sendON(){
              serial.write("1", function success(), function(){ alert("Failed to write data"); } );
            }
            
            function sendOFF(){
              serial.write("0", function success(), function(){ alert("Failed to write data"); } );
            }

        </script>
        <link rel="stylesheet" type="text/css" href="css/index.css" />
    </head>
    <body onload="onload()">
        <div data-role="page" id="index">
            <h1>Serial tester</h1>
            <input type="button" onclick="sendON()" value="ON"><br>
            <input type="button" onclick="sendOFF()" value="OFF">
        </div>
    </body>
</html>
